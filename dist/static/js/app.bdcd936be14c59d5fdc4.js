webpackJsonp([1],{"1/oy":function(t,e){},"9M+g":function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Jmt5"),a("9M+g");var s=a("e6fC"),n=a("7+uW"),i=a("mtWM"),o=a.n(i),c={name:"App",data:function(){return{tags:[],favos:[],se:"",se_old:"",newTag:[],selectTag:[],loading:!1}},computed:{selecttags:function(){var t=[];t.push({key:"全て",value:""});for(var e=0,a=this.tags.length;e<a;e++)t.push({key:this.tags[e],value:this.tags[e]});return t},inputtags:function(){for(var t=[""],e=0,a=this.tags.length;e<a;e++)t.push({key:this.tags[e],value:this.tags[e]});return t}},watch:{se:function(){this.getFavo()}},methods:{_getOffset:function(){return this.se_old!==this.se?0:this.favos.length},_getQ:function(){var t=this.se,e=this._getOffset();return t?"?tag="+t+"&offset="+e:"?offset="+e},_setNow2Old:function(){this.se_old!==this.se&&(this.se_old=this.se)},_setOrResetFavos:function(){this.se_old!==this.se&&this.favos.splice(0,this.favos.length)},getFavo:function(){var t=this,e=this._getQ();this.loading||(this.loading=!0,o.a.get("https://tw.lovesaemi.daemon.asia/getfavo_v2.php"+e).then(function(e){t.loading=!1,t.newTag=[],t.selectTag=[],t._setOrResetFavos(),t._setNow2Old();for(var a=0,s=e.data.length;a<s;a++)t.favos.push(e.data[a]);for(var n=0,i=t.favos.length;n<i;n++)t.newTag.push(t.favos[n].tag),t.selectTag.push(t.favos[n].tag)}))},changeKey:function(t){this.se_old=this.se,this.se=t.target.value},changeTag:function(t,e){this.newTag[e]="",this.selectTag[e]=t.target.value},updateTag:function(t,e){var a=this,s=this.newTag[e];""===this.newTag[e]&&(s=this.selectTag[e]),o.a.get("https://tw.lovesaemi.daemon.asia/settag.php?id="+t+"&tag="+s).then(function(t){o.a.get("https://tw.lovesaemi.daemon.asia/gettag.php").then(function(t){a.tags=t.data,a.newTag[e]=s})})}},mounted:function(){var t=this;o.a.get("https://tw.lovesaemi.daemon.asia/gettag.php").then(function(e){t.tags=e.data}),this.getFavo();var e=this;window.addEventListener("scroll",function(t){window.pageYOffset>=Math.max.apply(null,[document.body.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.documentElement.clientHeight])-2e3&&e.getFavo()})}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"app"}},[a("h1",[t._v("お気に入り")]),t._v(" "),a("select",{staticClass:"form-control",staticStyle:{"margin-bottom":"1em"},on:{change:t.changeKey}},t._l(t.selecttags,function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v("\n      "+t._s(e.key)+"\n    ")])})),t._v(" "),0==t.favos.length?a("div",[a("div",{staticClass:"loader"},[t._v("Loading...")])]):t._e(),t._v(" "),t._l(t.favos,function(e,s){return a("div",{key:e.id,staticClass:"card",staticStyle:{"margin-bottom":"1em"}},[a("div",{staticClass:"form-row align-items-center card-body"},[a("div",{staticClass:"col-auto",staticStyle:{"max-width":"7em"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTag[s],expression:"selectTag[i]"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.selectTag,s,e.target.multiple?a:a[0])},function(e){t.changeTag(e,s)}]}},t._l(t.inputtags,function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v("\n            "+t._s(e.key)+"\n          ")])}))]),t._v(" "),a("div",{staticClass:"col-auto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag[s],expression:"newTag[i]"}],staticClass:"form-control",staticStyle:{"max-width":"6em"},attrs:{type:"text"},domProps:{value:t.newTag[s]},on:{input:function(e){e.target.composing||t.$set(t.newTag,s,e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-primary",on:{click:function(a){t.updateTag(e.id_str,s)}}},[t._v("Set")])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[t._v(t._s(e.body.text))]),t._v(" "),a("p",{staticClass:"card-text text-muted"},[t._v(t._s(new Date(1e3*e.created_at).toLocaleString("ja-JP")))])]),t._v(" "),e.body.extended_entities?a("span",t._l(e.body.extended_entities.media,function(e){return a("span",{key:e.id},["photo"==e.type?a("span",[a("img",{staticClass:"card-img-top",attrs:{src:e.media_url_https}})]):t._e()])})):t._e(),t._v(" "),a("div",{staticClass:"card-body"},[a("a",{attrs:{href:"https://twitter.com/"+e.body.user.screen_name+"/status/"+e.body.id_str,target:"_blank"}},[t._v("Twitterでみる")])])])})],2)},staticRenderFns:[]};var r=a("VU/8")(c,l,!1,function(t){a("fP9D")},null,null).exports;n.a.use(s.a),n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:r},template:"<App/>"})},fP9D:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bdcd936be14c59d5fdc4.js.map